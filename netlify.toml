[build]
  command = "npm install && npm run build"
  publish = "apps/web/dist"
  functions = "netlify/functions"

[dev]
  command = "npm -w apps/web run dev"
  targetPort = 5173
  port = 8890
  functions = "netlify/functions"

[[redirects]]
  from = "/api/demo/weeks"
  to = "/.netlify/functions/demo_weeks"
  status = 200

[[redirects]]
  from = "/api/demo/taxonomy"
  to = "/.netlify/functions/demo_taxonomy"
  status = 200

[[redirects]]
  from = "/api/demo/cards"
  to = "/.netlify/functions/demo_cards"
  status = 200

[[redirects]]
  from = "/api/demo/segments"
  to = "/.netlify/functions/demo_segments"
  status = 200

[[redirects]]
  from = "/api/demo/fatigue"
  to = "/.netlify/functions/demo_fatigue"
  status = 200

[[redirects]]
  from = "/api/demo/alerts"
  to = "/.netlify/functions/demo_alerts"
  status = 200

[[redirects]]
  from = "/api/demo/narrative"
  to = "/.netlify/functions/demo_narrative"
  status = 200

[[redirects]]
  from = "/api/copilot_chat"
  to = "/.netlify/functions/copilot_chat"
  status = 200

[[redirects]]
  from = "/api/health"
  to = "/.netlify/functions/health"
  status = 200

[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
